(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{244:function(e,a,t){"use strict";t.r(a);var s=t(0),c=t.n(s),l=t(20),r=t(3),n=t.n(r),o=t(56),i=t(24),m=t(23),u=t(19),h=t(6),d=t.n(h),f=t(34);a.default=()=>{const e=Object(s.useContext)(u.a),[a,t]=Object(l.a)({searchValue:"",results:[],show:"neither",requestCount:0}),{searchValue:r,results:h,show:p,requestCount:v}=a,E=a=>{27==a.keyCode&&e({type:"closeSearch"})};Object(s.useEffect)(()=>(document.addEventListener("keyup",E),()=>document.removeEventListener("keyup",E)),[]),Object(s.useEffect)(()=>{if(r.trim()){t(e=>{e.show="loading"});const e=setTimeout(()=>{t(e=>{e.requestCount++})},700);return()=>clearTimeout(e)}t(e=>{e.show="neither"})},[r]),Object(s.useEffect)(()=>{if(v){const e=d.a.CancelToken.source();return(async()=>{try{const a=await d.a.post("/search",{searchTerm:r},{cancelToken:e.token});t(e=>{e.results=a.data,e.show="results"})}catch(e){console.log(e)}})(),()=>e.cancel()}},[v]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"search-overlay-top shadow-sm"},c.a.createElement(o.a,{className:"container--narrow py-3"},c.a.createElement("label",{htmlFor:"live-search-field",className:"search-overlay-icon"},c.a.createElement("i",{className:"fas fa-search"})),c.a.createElement("input",{autoFocus:!0,type:"text",autoComplete:"off",id:"live-search-field",className:"live-search-field",placeholder:"What are you interested in?",onChange:e=>{const a=e.target.value;t(e=>{e.searchValue=a})}}),c.a.createElement("span",{className:"close-live-search",title:"Close Search",onClick:()=>e({type:"closeSearch"})},c.a.createElement("i",{className:"fas fa-times-circle"})))),c.a.createElement("div",{className:"search-overlay-bottom"},c.a.createElement(o.a,{className:"container--narrow py-3"},c.a.createElement("div",{className:n()("circle-loader",{"circle-loader--visible":"loading"==p})}),c.a.createElement("div",{className:n()("live-search-results",{"live-search-results--visible":"results"==p})},h.length?c.a.createElement(i.a,{className:"shadow-sm"},c.a.createElement(i.a.Item,{active:!0},c.a.createElement("strong",null,"Search Results")," (",h.length," ",h.length>1?"items":"item"," found)"),h.map(a=>c.a.createElement(f.a,{post:a,key:a._id,onClick:()=>e({type:"closeSearch"})}))):c.a.createElement(m.a,{variant:"danger",className:"text-center shadow-sm text-capitalize font-weight-normal"},"no results found")))))}}}]);