(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{161:function(e,a){},245:function(e,a,t){"use strict";t.r(a);var c=t(0),s=t.n(c),r=t(7),l=t(20),n=t(3),m=t.n(n),o=t(134),i=t.n(o),u=t(13),h=t(19);a.default=()=>{const{isChatOpen:e,user:{username:a,avatar:t,token:n}}=Object(c.useContext)(u.a),o=Object(c.useContext)(h.a),p=Object(c.useRef)(null),d=Object(c.useRef)(null),f=Object(c.useRef)(null),[E,b]=Object(l.a)({chatFieldValue:"",chatMessages:[]}),{chatFieldValue:g,chatMessages:v}=E;Object(c.useEffect)(()=>{e&&(d.current.focus(),o({type:"clearUnreadChatCount"}))},[e]),Object(c.useEffect)(()=>(p.current=i()("http://localhost:8080"),p.current.on("chatFromServer",e=>b(a=>{a.chatMessages.push(e)})),()=>p.current.disconnect()),[]),Object(c.useEffect)(()=>{f.current.scrollTop=f.current.scrollHeight,v.length&&!e&&o({type:"incrementUnreadChatCount"})},[v]);return s.a.createElement("div",{id:"chat-wrapper",className:m()("chat-wrapper",{"chat-wrapper--is-visible":e},"shadow","border-top","border-left","border-right")},s.a.createElement("div",{className:"chat-title-bar bg-primary"},s.a.createElement("span",null,s.a.createElement("i",{className:"fas fa-users"})," Group Chat"),s.a.createElement("span",{className:"chat-title-bar-close",title:"Close Chat",onClick:()=>o({type:"closeChat"})},s.a.createElement("i",{className:"fas fa-times-circle"}))),s.a.createElement("div",{id:"chat",className:"chat-log",ref:f},v.map((e,t)=>{const{username:c,avatar:l,message:n}=e;return c==a?s.a.createElement("div",{className:"chat-self",key:t},s.a.createElement("div",{className:"chat-message"},s.a.createElement("div",{className:"chat-message-inner"},n)),s.a.createElement("img",{className:"chat-avatar avatar-tiny",src:l})):s.a.createElement("div",{className:"chat-other",key:t},s.a.createElement(r.b,{to:"/profile/"+c},s.a.createElement("img",{className:"avatar-tiny",src:l})),s.a.createElement("div",{className:"chat-message"},s.a.createElement("div",{className:"chat-message-inner"},s.a.createElement(r.b,{to:"/profile/"+c},s.a.createElement("strong",null,c)),": ",n)))})),s.a.createElement("form",{id:"chatForm",className:"chat-form border-top",onSubmit:e=>{e.preventDefault(),p.current.emit("chatFromBrowser",{message:g,token:n}),b(e=>{e.chatMessages.push({message:e.chatFieldValue,username:a,avatar:t}),e.chatFieldValue=""})}},s.a.createElement("input",{type:"text",className:"chat-field",id:"chatField",placeholder:"Type a messageâ€¦",autoComplete:"off",ref:d,onChange:e=>{const a=e.target.value;b(e=>{e.chatFieldValue=a})},value:g})))}}}]);